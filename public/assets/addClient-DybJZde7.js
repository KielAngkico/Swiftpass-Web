import{j as e,r as o,A as x,a as f}from"./index-BYZoeFiF.js";import{S as k}from"./SuperAdminSidebar-w5hGfztw.js";import"./index-D-5OJeWc.js";const A=({isOpen:g,onClose:d,formData:r,onFormChange:a,onSubmit:p})=>g?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-opacity-50 z-50 p-4",onClick:d,children:e.jsxs("div",{className:"bg-white p-5 rounded-md shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Add New Partner"}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Gym Name"}),e.jsx("input",{type:"text",name:"gym_name",value:r.gym_name,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Admin Name"}),e.jsx("input",{type:"text",name:"admin_name",value:r.admin_name,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Age"}),e.jsx("input",{type:"number",name:"age",value:r.age,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Gym Address"}),e.jsx("textarea",{name:"address",value:r.address,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"System Type"}),e.jsxs("select",{name:"system_type",value:r.system_type,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select System Type --"}),e.jsx("option",{value:"prepaid_entry",children:"Prepaid Entry"}),e.jsx("option",{value:"subscription",children:"Subscription Membership"})]})]}),r.system_type==="prepaid_entry"&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded-md border border-blue-200",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Session Fee (â‚±)"}),e.jsx("input",{type:"number",name:"session_fee",value:r.session_fee,onChange:a,className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter session fee amount",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-60 h-60 bg-gray-100 border rounded-md flex items-center justify-center overflow-hidden",children:r.profile_image_url?e.jsx("img",{src:r.profile_image_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No Image"})}),e.jsxs("label",{className:"cursor-pointer bg-blue-500 text-white text-xs px-4 py-2 rounded-md hover:bg-blue-600",children:["Upload Picture",e.jsx("input",{type:"file",accept:"image/*",name:"profile_image_url",onChange:a,className:"hidden"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{type:"button",className:"flex-1 bg-gray-500 text-white px-3 py-2 rounded-md text-xs hover:bg-gray-600",onClick:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md text-xs",children:"Add Partner"})]})]})]})}):null,$=()=>{const[g,d]=o.useState(!1),[r,a]=o.useState({admin_name:"",age:"",address:"",email:"",password:"",gym_name:"",system_type:"",session_fee:"",profile_image_url:null}),[p,i]=o.useState(""),[u,b]=o.useState([]),[l,y]=o.useState(null);o.useEffect(()=>{(async()=>{try{const n=await f.get(`${x}/api/admins`);b(n.data)}catch{i("Error fetching partners. Please try again.")}})()},[]);const c=(s,n="error")=>{i(s),setTimeout(()=>i(""),4e3)},j=s=>{s.target.type==="file"?a({...r,[s.target.name]:s.target.files[0]}):a({...r,[s.target.name]:s.target.value})},N=async s=>{if(s.preventDefault(),i(""),isNaN(r.age)||String(r.age).trim()===""){c("Age must be a valid number.");return}const n=r.session_fee?Number(r.session_fee):0;try{const t=new FormData;t.append("admin_name",r.admin_name),t.append("age",Number(r.age)),t.append("address",r.address),t.append("email",r.email),t.append("password",r.password),t.append("gym_name",r.gym_name),t.append("system_type",r.system_type),t.append("session_fee",n),r.profile_image_url&&t.append("profile_image_url",r.profile_image_url);const m=await f.post(`${x}/api/add-client`,t,{headers:{"Content-Type":"multipart/form-data"}});c("Partner added successfully!","success"),d(!1),a({admin_name:"",age:"",address:"",email:"",password:"",gym_name:"",system_type:"",session_fee:"",profile_image_url:null}),b([...u,{id:m.data.id,...m.data}])}catch{c("Failed to add partner. Please try again.")}},_=async(s,n)=>{try{const t=n?"restore-admin":"archive-admin",m=n?"restore":"archive";window.confirm(`Are you sure you want to ${m} this partner?`)&&(await f.put(`${x}/api/${t}/${s}`),b(u.map(h=>h.id===s?{...h,is_archived:!n}:h)),c(`Partner ${m}d successfully!`,"success"))}catch{c(`Failed to ${n?"restore":"archive"} partner. Please try again.`)}},v=()=>{d(!1),a({admin_name:"",age:"",address:"",email:"",password:"",gym_name:"",system_type:"",session_fee:"",profile_image_url:null})},w=({message:s})=>{if(!s)return null;const t=s.includes("success")?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700";return e.jsx("div",{className:`p-3 mb-4 rounded-md border ${t} text-sm`,children:s})};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(k,{}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Partner Management"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Manage your gym partners and their information"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 transition-colors text-xs font-medium w-full sm:w-auto",onClick:()=>d(!0),children:"+ Add New Partner"})}),e.jsx(w,{message:p}),e.jsx(A,{isOpen:g,onClose:v,formData:r,onFormChange:j,onSubmit:N}),u.length===0?e.jsxs("div",{className:"text-center py-6 bg-white rounded-md border",children:[e.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"No partners found"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Add your first partner to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(s=>e.jsxs("div",{className:`rounded-lg border shadow-sm transition-all text-xs ${s.is_archived?"bg-red-50 border-red-200":"bg-white border-gray-200 hover:shadow-md"}`,children:[s.profile_image_url&&e.jsx("img",{src:`${x}${s.profile_image_url}`,alt:s.gym_name,className:"w-full h-28 object-cover rounded-t-lg"}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-black text-sm truncate",children:s.gym_name}),e.jsxs("p",{className:"text-black text-xs truncate",children:[e.jsx("span",{className:"font-bold",children:"Owner:"})," ",s.admin_name]}),e.jsxs("p",{className:"text-black text-xs line-clamp-2",children:[e.jsx("span",{className:"font-bold",children:"Address:"})," ",s.address]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 px-2 py-1 rounded-md hover:bg-gray-200 transition-colors text-xs font-medium",onClick:()=>y(s),children:"View"}),e.jsx("button",{className:`flex-1 px-2 py-1 rounded-md text-white text-xs font-medium transition-colors ${s.is_archived?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,onClick:()=>_(s.id,s.is_archived),children:s.is_archived?"Restore":"Archive"})]})]})]},s.id))}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-5 w-full max-w-sm shadow-lg",children:[l.profile_image_url&&e.jsx("img",{src:`${x}${l.profile_image_url}`,alt:l.gym_name,className:"w-full h-36 object-cover rounded-md mb-3"}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:l.gym_name}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Owner:"})," ",l.admin_name]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Email:"})," ",l.email]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Age:"})," ",l.age]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Address:"})," ",l.address]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"System:"})," ",l.system_type]}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Session Fee:"})," ",l.session_fee]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-md text-xs hover:bg-gray-300",onClick:()=>y(null),children:"Close"})})]})})]})]})};export{$ as default};
