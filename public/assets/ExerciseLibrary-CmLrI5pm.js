import{j as e,r as o,A as m,a as b}from"./index-BYZoeFiF.js";import{S as N}from"./SuperAdminSidebar-w5hGfztw.js";import{E as _}from"./ExerciseCard-CXk6ElDL.js";import"./index-D-5OJeWc.js";const C=({isOpen:x,onClose:i,onSave:u,newExercise:a,setNewExercise:r})=>x?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50 p-4",onClick:i,children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add Exercise"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsxs("div",{className:"space-y-3 col-span-2",children:[e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Exercise Name",value:a.name,onChange:l=>r({...a,name:l.target.value}),required:!0}),e.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:a.level,onChange:l=>r({...a,level:l.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"-- Select Level --"}),e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Muscle Group",value:a.muscle_group,onChange:l=>r({...a,muscle_group:l.target.value})}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Sub Target",value:a.sub_target,onChange:l=>r({...a,sub_target:l.target.value})}),e.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:a.exercise_type,onChange:l=>r({...a,exercise_type:l.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"compound",children:"Compound"}),e.jsx("option",{value:"isolation",children:"Isolation"}),e.jsx("option",{value:"hybrid",children:"Hybrid"})]}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Equipment",value:a.equipment,onChange:l=>r({...a,equipment:l.target.value})}),e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Instructions",value:a.instructions,onChange:l=>r({...a,instructions:l.target.value}),rows:"3"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-60 h-60 bg-gray-100 border rounded-md flex items-center justify-center overflow-hidden",children:a.image_file?e.jsx("img",{src:URL.createObjectURL(a.image_file),alt:"Exercise",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-xs text-gray-400",children:"No Image"})}),e.jsxs("label",{className:"cursor-pointer bg-blue-500 text-white text-xs px-4 py-2 rounded-md hover:bg-blue-600",children:["Upload Image",e.jsx("input",{type:"file",accept:"image/*",onChange:l=>r({...a,image_file:l.target.files[0]}),className:"hidden"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",className:"border px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-100",onClick:i,children:"Cancel"}),e.jsx("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-600 transition-colors",onClick:u,children:"Save"})]})]})]})}):null,q=()=>{const[x,i]=o.useState([]),[u,a]=o.useState(!1),[r,l]=o.useState(null),[d,h]=o.useState({name:"",level:"beginner",muscle_group:"",sub_target:"",exercise_type:"compound",equipment:"",instructions:"",image_file:null}),[t,n]=o.useState(null),[f,p]=o.useState(!1),v=s=>{n({...s,image_file:null}),p(!0)},j=async()=>{try{const s=new FormData;s.append("name",t.name),s.append("level",t.level),s.append("muscle_group",t.muscle_group),s.append("sub_target",t.sub_target),s.append("exercise_type",t.exercise_type),s.append("equipment",t.equipment),s.append("instructions",t.instructions),s.append("created_by",1),t.image_file&&s.append("image",t.image_file),await b.put(`${m}/api/exercises/${t.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),g(),p(!1),n(null)}catch(s){console.error("Edit Error:",s.message)}},g=async()=>{try{const s=await b.get(`${m}/api/exercises`);i(s.data)}catch(s){console.error("Fetch Error:",s.message)}};o.useEffect(()=>{g()},[]);const y=async()=>{try{const s=new FormData;for(const c in d)c==="image_file"&&d[c]?s.append("image",d[c]):s.append(c,d[c]);s.append("created_by",1),await b.post(`${m}/api/exercises`,s,{headers:{"Content-Type":"multipart/form-data"}}),g(),a(!1),h({name:"",level:"beginner",muscle_group:"",sub_target:"",exercise_type:"compound",equipment:"",instructions:"",image_file:null})}catch(s){console.error("Add Error:",s.message)}};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx(N,{}),e.jsxs("div",{className:"flex-1 p-5",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Exercise Library"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Manage and customize your exercise collection"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-xs font-medium w-full sm:w-auto",onClick:()=>a(!0),children:"+ Add Exercise"})}),e.jsx("h2",{className:"text-base font-medium text-gray-700 mb-3",children:"Imported Exercises"}),e.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(240px,1fr))] gap-2",children:x.map(s=>e.jsxs("div",{className:"bg-white rounded-md shadow-sm border p-2 h-72 flex flex-col",children:[s.image_url&&e.jsx("img",{src:`${m}${s.image_url}`,alt:s.name,className:"w-full h-40 object-cover rounded mb-2"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 capitalize mb-1 line-clamp-1",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Muscle:"})," ",s.muscle_group]}),e.jsxs("p",{className:"text-xs text-gray-700 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"Level:"})," ",s.level]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-2",children:s.instructions}),e.jsxs("div",{className:"flex gap-1 mt-auto",children:[e.jsx("button",{className:"flex-1 bg-gray-100 text-gray-700 px-2 py-1 rounded hover:bg-gray-200 transition-colors text-xs font-medium",onClick:()=>l(s),children:"View"}),e.jsx("button",{className:"flex-1 bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition-colors text-xs font-medium",onClick:()=>v(s),children:"Edit"})]})]},s.id))})]}),u&&e.jsx(C,{isOpen:u,onClose:()=>a(!1),onSave:y,newExercise:d,setNewExercise:h}),f&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-5 rounded-md w-[90%] max-w-md shadow-lg overflow-auto max-h-[85vh]",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-3",children:"Edit Exercise"}),e.jsx("input",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",placeholder:"Name",value:t.name,onChange:s=>n({...t,name:s.target.value})}),e.jsxs("select",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",value:t.level,onChange:s=>n({...t,level:s.target.value}),children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]}),e.jsx("input",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",placeholder:"Muscle Group",value:t.muscle_group,onChange:s=>n({...t,muscle_group:s.target.value})}),e.jsx("input",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",placeholder:"Sub Target",value:t.sub_target,onChange:s=>n({...t,sub_target:s.target.value})}),e.jsxs("select",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",value:t.exercise_type,onChange:s=>n({...t,exercise_type:s.target.value}),children:[e.jsx("option",{value:"compound",children:"Compound"}),e.jsx("option",{value:"isolation",children:"Isolation"}),e.jsx("option",{value:"hybrid",children:"Hybrid"})]}),e.jsx("input",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",placeholder:"Equipment",value:t.equipment,onChange:s=>n({...t,equipment:s.target.value})}),e.jsx("textarea",{className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",placeholder:"Instructions",value:t.instructions,onChange:s=>n({...t,instructions:s.target.value})}),e.jsx("input",{type:"file",accept:"image/*",className:"w-full mb-2 border px-2 py-1.5 rounded text-sm",onChange:s=>n({...t,image_file:s.target.files[0]})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{className:"bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 transition-colors text-xs font-medium",onClick:j,children:"Save Changes"}),e.jsx("button",{className:"border px-3 py-1.5 rounded-md text-xs font-medium",onClick:()=>p(!1),children:"Cancel"})]})]})}),r&&e.jsx(_,{exercise:r,onClose:()=>l(null)})]})};export{q as default};
