import{r as a,a as d,A as o,j as e}from"./index-BYZoeFiF.js";import{S as j}from"./SuperAdminSidebar-w5hGfztw.js";import"./index-D-5OJeWc.js";const N=()=>{const[l,g]=a.useState([]),[r,i]=a.useState(""),[x,c]=a.useState(!0);a.useEffect(()=>{t()},[]);const t=async()=>{try{c(!0);const s=await d.get(`${o}/api/allergens`);g(s.data)}catch(s){console.error("Error fetching allergens:",s),alert("Failed to fetch allergens")}finally{c(!1)}},m=async()=>{if(!r.trim()){alert("Please enter an allergen name");return}try{await d.post(`${o}/api/allergens`,{name:r.trim()}),i(""),t(),alert("Allergen added successfully!")}catch(s){console.error("Error adding allergen:",s),alert("Failed to add allergen")}},h=async(s,n)=>{if(window.confirm(`Are you sure you want to delete "${n}"?`))try{await d.delete(`${o}/api/allergens/${s}`),t(),alert("Allergen deleted successfully!")}catch(f){console.error("Error deleting allergen:",f),alert("Failed to delete allergen")}},u=s=>{s.key==="Enter"&&m()};return e.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[e.jsx(j,{}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Allergens Management"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Total Allergens: ",e.jsx("span",{className:"font-semibold",children:l.length})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow-sm mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Add New Allergen"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>i(s.target.value),onKeyPress:u,placeholder:"Enter allergen name (e.g., Gluten, Dairy, Nuts)",className:"flex-1 p-3 border border-gray-300 rounded focus:ring-2 focus:ring-green-500 focus:border-transparent"}),e.jsx("button",{onClick:m,disabled:!r.trim(),className:"bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Add Allergen"})]})]}),e.jsxs("div",{className:"bg-white rounded shadow-sm",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Current Allergens"})}),e.jsx("div",{className:"p-4",children:x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),e.jsx("span",{className:"mt-2 text-gray-600",children:"Loading allergens..."})]}):l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No allergens found"}),e.jsx("p",{className:"text-gray-500",children:"Add your first allergen using the form above."})]}):e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map((s,n)=>e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 p-3 rounded hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm text-gray-500 mr-3",children:["#",n+1]}),e.jsx("span",{className:"font-medium text-gray-800",children:s.name})]}),e.jsx("button",{onClick:()=>h(s.id,s.name),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded transition-colors",title:`Delete ${s.name}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s.id))})})})]})]})]})};export{N as default};
